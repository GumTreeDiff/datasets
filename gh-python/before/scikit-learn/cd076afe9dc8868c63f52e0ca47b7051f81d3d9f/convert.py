#! /usr/bin/env python
# Last Change: Mon Jul 09 06:00 PM 2007 J

# This script generates a python file from the txt data
import time
import csv

dataname = 'german.numer'
f = open(dataname, 'r')
a = csv.reader(f, delimiter = ' ')
el = [i for i in a]
# Remove last value corresponding to empty line in data file
assert len(el) == 1000

label = [i[0] for i in el]
feat = {}
for i in range(len(el[0][1:-1])):
    feat['feat' + str(i+1)] = [j[i+1].split(':')[1] for j in el]

a = open("german.py", "w")
a.write('# Autogenerated by convert.py at %s\n\n' % 
        time.strftime("%a, %d %b %Y %H:%M:%S +0000", time.gmtime()))

def dump_var(var, varname):
    import textwrap
    strvar = varname + " = " + str(var)
    a.writelines([i + '\n' for i in textwrap.wrap(strvar, 79)])
    a.write("\n")

dump_var(label, 'label')
dump_var(feat, 'feat')
