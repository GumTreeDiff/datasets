#! /usr/bin/env python
# Last Change: Tue Jul 17 03:00 PM 2007 J

# This script generates a python file from the txt data
import time
import csv

from scikits.learn.datasets.misc import dumpvar

# array for equivalence label index <> label name
ln2li = {'Iris-setosa' : 0, 'Iris-versicolor': 1, 'Iris-virginica' :2}
li2ln = {}
for c,i in ln2li.items():
    li2ln[i] = c

# Load the data
dataname = 'iris.data'
f = open(dataname, 'r')
a = csv.reader(f)
el = [i for i in a]
# Remove last value corresponding to empty line in data file
el.remove(el[-1])
assert len(el) == 150

sl = [i[0] for i in el]
sw = [i[1] for i in el]
pl = [i[2] for i in el]
pw = [i[3] for i in el]
cl = [i[4] for i in el]

# dcl[i] = label index of data[i]
dcl = [ln2li[i] for i in cl]

# Write the data in oldfaitful.py
a = open("../iris.py", "w")
a.write('# Autogenerated by convert.py at %s\n\n' % 
        time.strftime("%a, %d %b %Y %H:%M:%S +0000", time.gmtime()))

a.writelines(dumpvar(sl, 'SL'))
a.writelines(dumpvar(sw, 'SW'))
a.writelines(dumpvar(pl, 'PL'))
a.writelines(dumpvar(pw, 'PW'))
a.writelines(dumpvar(dcl, 'LABELS'))
a.writelines(dumpvar(li2ln, 'LI2LN'))
